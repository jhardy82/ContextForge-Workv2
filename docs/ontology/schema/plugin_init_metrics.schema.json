{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://contextforge.local/schemas/plugin_init_metrics.schema.json",
  "title": "CF-Enhanced Plugin Initialization Metrics",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "memory": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "attempted": { "type": "boolean" },
        "active": { "type": "boolean" },
        "elapsed_ms": { "type": "number", "minimum": 0 },
        "error": { "type": ["string", "null"] },
  "error_obj": { "oneOf": [ {"type": "null"}, { "$ref": "./error_obj.schema.json" } ] }
      },
      "required": ["attempted", "active", "elapsed_ms", "error", "error_obj"]
    },
    "summary": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "attempted": { "type": "boolean" },
        "active": { "type": "boolean" },
        "elapsed_ms": { "type": "number", "minimum": 0 },
        "error": { "type": ["string", "null"] },
  "error_obj": { "oneOf": [ {"type": "null"}, { "$ref": "./error_obj.schema.json" } ] }
      },
      "required": ["attempted", "active", "elapsed_ms", "error", "error_obj"]
    },
    "totals": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "attempted_plugins": { "type": "integer", "minimum": 0 },
        "active_plugins": { "type": "integer", "minimum": 0 },
        "failed_plugins": { "type": "integer", "minimum": 0 },
        "elapsed_ms": { "type": "number", "minimum": 0 }
      },
      "required": [
        "attempted_plugins",
        "active_plugins",
        "failed_plugins",
        "elapsed_ms"
      ]
    }
  },
  "required": ["memory", "summary", "totals"]
}
