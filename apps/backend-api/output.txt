['', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\src', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311\\python311.zip', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311\\DLLs', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311\\Lib', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\.venv', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\.venv\\Lib\\site-packages']

============================================================
PYTEST COLLECTION DIAGNOSTICS
CWD: C:\Users\James\Documents\Github\GHrepos\SCCMScripts\TaskMan-v2\backend-api
PYTHONPATH: src;../../
SYS.PATH: ['C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\tests', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\src', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\..\\..', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\.venv\\Scripts\\pytest.exe', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\src', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311\\python311.zip', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311\\DLLs', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311\\Lib', 'C:\\Users\\James\\AppData\\Local\\Programs\\Python\\Python311', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\.venv', 'C:\\Users\\James\\Documents\\Github\\GHrepos\\SCCMScripts\\TaskMan-v2\\backend-api\\.venv\\Lib\\site-packages']
PYTHON EXECUTABLE: C:\Users\James\Documents\Github\GHrepos\SCCMScripts\TaskMan-v2\backend-api\.venv\Scripts\python.exe
cf_core: Successfully imported
============================================================

================================================= test session starts =================================================
platform win32 -- Python 3.11.9, pytest-8.4.2, pluggy-1.6.0 -- C:\Users\James\Documents\Github\GHrepos\SCCMScripts\TaskMan-v2\backend-api\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\James\Documents\Github\GHrepos\SCCMScripts\TaskMan-v2\backend-api
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.12.0, Faker-30.10.0, asyncio-0.26.0, cov-5.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... collected 212 items

<Dir backend-api>
  <Dir tests>
    <Dir integration>
      <Dir api>
        <Module test_action_lists_api.py>
          Integration tests for Action List API endpoints.
          <Class TestActionListIntegration>
            Integration tests for Action List management.
            <Coroutine test_action_list_lifecycle>
              Test complete action list lifecycle: Create -> Get -> Update -> Delete.
            <Coroutine test_validation_errors>
              Test error conditions.
        <Module test_projects_api.py>
          Integration tests for Project API endpoints.
          <Class TestProjectIntegration>
            Integration tests for Project management.
            <Coroutine test_project_crud_lifecycle>
              Test complete project lifecycle: Create -> Get -> Update -> Delete.
            <Coroutine test_project_validation_errors>
              Test validation failures.
            <Coroutine test_project_metrics_endpoint>
              Test fetching project overview metrics.
            <Coroutine test_duplicate_project_id>
              Test creating duplicate project ID.
        <Module test_sprints_api.py>
          Integration tests for Sprint API endpoints.
          <Class TestSprintIntegration>
            Integration tests for Sprint management.
            <Coroutine test_sprint_management>
              Test complete sprint lifecycle: Create -> Get -> Update -> Delete.
            <Coroutine test_sprint_validation_errors>
              Test validation failures.
            <Coroutine test_sprint_velocity_calculation>
              Test sprint progress/velocity metrics.
        <Module test_tasks_api.py>
          Integration tests for Task API endpoints.
          <Class TestTaskIntegration>
            Integration tests for Task management.
            <Coroutine test_create_task_full_lifecycle>
              Test complete task lifecycle: Create -> Get -> Update -> Delete.
            <Coroutine test_task_validation_errors>
              Test various validation failure scenarios.
            <Coroutine test_list_tasks_pagination_and_filtering>
              Test listing tasks with various filters and pagination.
            <Coroutine test_duplicate_task_id>
              Test creating a task with an existing ID returns 409 Conflict.
      <Dir services>
        <Module test_cross_service_ops.py>
          <Coroutine test_full_workflow_simulation>
            Simulate a full user workflow:
            1. Create Project
            2. Create Sprint
            3. Create Tasks
            4. Move incomplete tasks to next sprint
        <Module test_project_sprint_flow.py>
          <Coroutine test_project_sprint_task_hierarchy>
            Verify Project -> Sprint -> Task hierarchy creation and retrieval.
          <Coroutine test_orphan_prevention>
            Verify that creating entities with invalid parent IDs fails.
        <Module test_task_sprint_flow.py>
          <Coroutine test_task_movement_between_sprints>
            Verify moving a task from one sprint to another.
          <Coroutine test_sprint_closure_logic>
            Verify logic when 'closing' a sprint (simulated via status updates).
        <Module test_task_validation.py>
          <Coroutine test_create_task_with_invalid_project>
            Test creating a task with a non-existent project ID.
          <Coroutine test_create_task_with_invalid_sprint>
            Test creating a task with a non-existent sprint ID.
          <Coroutine test_update_task_with_invalid_foreign_keys>
            Test that updating a task with invalid project_id or sprint_id fails.
      <Module test_action_list_service.py>
        Integration tests for ActionList Service (bypassing broken router).
        
        These tests validate the service layer directly until router is fixed.
        See AAR-T11-Integration-Testing-CRITICAL-FINDINGS.md for details.
        <Class TestActionListServiceDirect>
          Test ActionListService methods directly (bypassing router).
          <Coroutine test_create_returns_ok_result>
            Should create action list and return Ok result.
          <Coroutine test_get_existing_returns_ok>
            Should retrieve existing action list.
          <Coroutine test_get_nonexistent_returns_err>
            Should return Err for nonexistent list.
          <Coroutine test_update_returns_ok>
            Should update action list.
          <Coroutine test_delete_returns_ok>
            Should delete action list.
          <Coroutine test_list_returns_ok>
            Should list action lists.
          <Coroutine test_search_with_status_filter>
            Should search with status filter.
    <Dir unit>
      <Dir db>
        <Dir repositories>
          <Module test_base_repository.py>
            Unit tests for BaseRepository.
            
            Tests generic CRUD operations with Result monad pattern.
            <Class TestBaseRepository>
              Test suite for BaseRepository generic CRUD operations.
              <Coroutine test_create_success>
                Test successful entity creation.
              <Coroutine test_create_conflict>
                Test create with duplicate ID raises IntegrityError.
              <Coroutine test_find_by_id_success>
                Test successful find by ID.
              <Coroutine test_find_by_id_not_found>
                Test find by ID returns None when entity doesn't exist.
              <Coroutine test_find_all_success>
                Test find all with pagination.
              <Coroutine test_update_success>
                Test successful entity update.
              <Coroutine test_update_not_found>
                Test update raises error when entity doesn't exist/not attached.
              <Coroutine test_delete_success>
                Test successful entity deletion.
              <Coroutine test_exists_true>
                Test exists returns True when entity exists.
              <Coroutine test_exists_false>
                Test exists returns False when entity doesn't exist.
              <Coroutine test_count>
                Test count returns correct number of entities.
          <Module test_project_repository.py>
            Unit tests for ProjectRepository edge cases.
            <Class TestProjectRepositoryEdgeCases>
              Test suite for ProjectRepository edge cases.
              <Coroutine test_exists>
                Test exists check.
              <Coroutine test_get_by_owner>
                Test getting projects by owner.
              <Coroutine test_search_filters_and_pagination>
                Test search with combined filters and pagination.
              <Coroutine test_create_project_method>
                Test explicit create_project helper.
              <Coroutine test_update_project_method>
                Test explicit update_project helper.
          <Module test_repositories.py>
            Unit tests for ProjectRepository, SprintRepository, and ActionListRepository.
            
            Consolidated test suite for remaining repository specialized queries.
            Updated to use correct method names and direct return values (not Result monads).
            Model fields verified against actual SQLAlchemy model definitions on 2025-12-28.
            <Class TestProjectRepository>
              Test suite for ProjectRepository.
              <Coroutine test_get_by_status>
                Test finding projects by status.
              <Coroutine test_get_active_projects>
                Test finding all active projects via get_by_status.
            <Class TestSprintRepository>
              Test suite for SprintRepository.
              <Coroutine test_get_by_status>
                Test finding sprints by status.
              <Coroutine test_get_active_sprints>
                Test finding all active sprints.
            <Class TestActionListRepository>
              Test suite for ActionListRepository.
              <Coroutine test_get_active>
                Test finding active action lists.
              <Coroutine test_search_action_lists>
                Test searching action lists with filters.
          <Module test_sprint_repository.py>
            Unit tests for SprintRepository edge cases.
            <Class TestSprintRepositoryEdgeCases>
              Test suite for SprintRepository edge cases.
              <Coroutine test_exists>
                Test exists check.
              <Coroutine test_get_by_project>
                Test getting sprints by project.
              <Coroutine test_get_active_sprints>
                Test active sprints getter.
              <Coroutine test_search_sprints>
                Test search with filters.
              <Coroutine test_create_and_update_sprint_helpers>
                Test create and update helper methods.
          <Module test_task_repository.py>
            Unit tests for TaskRepository.
            
            Tests task-specific query methods.
            <Class TestTaskRepository>
              Test suite for TaskRepository specialized queries.
              <Coroutine test_find_by_status>
                Test finding tasks by status.
              <Coroutine test_find_by_priority>
                Test finding tasks by priority.
              <Coroutine test_find_by_owner>
                Test finding tasks by owner.
              <Coroutine test_find_by_project>
                Test finding tasks by project.
              <Coroutine test_find_by_project_with_status_filter>
                Test finding tasks by project with status filter.
              <Coroutine test_find_by_sprint>
                Test finding tasks by sprint.
              <Coroutine test_find_by_status_and_priority>
                Test finding tasks by status and priority (composite index).
              <Coroutine test_find_blocked_tasks>
                Test finding all blocked tasks.
              <Coroutine test_find_high_priority_tasks>
                Test finding P0 and P1 (critical/high priority) tasks.
        <Module test_connection_manager.py>
          <Coroutine test_init_creates_engines>
          <Coroutine test_get_session_primary_success>
          <Coroutine test_get_session_failover>
          <Coroutine test_health_check_reporting>
          <Coroutine test_health_check_primary_down>
      <Dir schemas>
        <Module test_schemas.py>
          Unit tests for Project, Sprint, and ActionList schemas.
          
          Consolidated test suite for remaining Pydantic schemas.
          <Class TestProjectSchemas>
            Test suite for Project schemas.
            <Function test_project_create_request_valid>
              Test creating a valid project create request.
            <Function test_project_id_pattern_validation>
              Test project ID pattern validation.
            <Function test_project_update_request_partial>
              Test partial project updates.
            <Function test_project_response_serialization>
              Test project response serialization.
          <Class TestSprintSchemas>
            Test suite for Sprint schemas.
            <Function test_sprint_create_request_valid>
              Test creating a valid sprint create request.
            <Function test_sprint_id_pattern_validation>
              Test sprint ID pattern validation.
            <Function test_sprint_velocity_points_non_negative>
              Test velocity points must be non-negative.
            <Function test_sprint_update_request_partial>
              Test partial sprint updates.
            <Function test_sprint_response_with_metrics>
              Test sprint response with metrics.
          <Class TestActionListSchemas>
            Test suite for ActionList schemas.
            <Function test_action_list_create_request_valid>
              Test creating a valid action list create request.
            <Function test_action_list_with_associations>
              Test action list with project/sprint associations.
            <Function test_action_list_soft_delete_fields>
              Test action list soft delete fields.
            <Function test_action_list_update_request_partial>
              Test partial action list updates.
            <Function test_action_list_response_with_metadata>
              Test action list response with metadata.
          <Class TestBaseSchemaConfiguration>
            Test base schema configuration.
            <Function test_strict_type_validation>
              Test that type coercion is enabled (strict=False).
            <Function test_from_attributes_orm_mode>
              Test ORM mode (from_attributes) is enabled.
        <Module test_task_schemas.py>
          Unit tests for Task Pydantic schemas.
          
          Tests validation rules and field constraints.
          <Class TestTaskCreateRequest>
            Test suite for TaskCreateRequest validation.
            <Function test_valid_task_create_request>
              Test creating a valid task create request.
            <Function test_task_id_pattern_validation_success>
              Test task ID pattern validation with valid patterns.
            <Function test_task_id_pattern_validation_failure>
              Test task ID pattern validation with invalid patterns.
            <Function test_required_fields_validation>
              Test that required fields are validated.
            <Function test_title_max_length_validation>
              Test title maximum length validation.
            <Function test_estimate_points_non_negative>
              Test estimate_points must be non-negative.
            <Function test_business_value_score_range>
              Test business_value_score must be 0-10.
            <Function test_enum_field_validation>
              Test enum field validation.
            <Function test_default_values>
              Test default values are applied correctly.
          <Class TestTaskUpdateRequest>
            Test suite for TaskUpdateRequest validation.
            <Function test_partial_update_all_fields_optional>
              Test that all fields are optional for partial updates.
            <Function test_update_with_multiple_fields>
              Test updating multiple fields at once.
            <Function test_update_validation_rules_still_apply>
              Test that validation rules still apply to update requests.
          <Class TestTaskResponse>
            Test suite for TaskResponse schema.
            <Function test_response_from_orm_model>
              Test creating response from ORM model.
            <Function test_response_serialization>
              Test response can be serialized to dict/JSON.
      <Dir services>
        <Module test_base_service.py>
          Unit tests for BaseService.
          
          Tests generic CRUD operations with mock repositories.
          <Class TestBaseServiceCreate>
            Test suite for BaseService.create().
            <Coroutine test_create_success>
              Test successful entity creation.
            <Coroutine test_create_conflict_error>
              Test creation with duplicate ID returns AppError (wrapping logic).
          <Class TestBaseServiceGet>
            Test suite for BaseService.get().
            <Coroutine test_get_success>
              Test successful entity retrieval.
            <Coroutine test_get_not_found>
              Test get with non-existent ID returns NotFoundError.
          <Class TestBaseServiceUpdate>
            Test suite for BaseService.update().
            <Coroutine test_update_success>
              Test successful entity update.
            <Coroutine test_update_not_found>
              Test update with non-existent ID returns NotFoundError.
          <Class TestBaseServiceDelete>
            Test suite for BaseService.delete().
            <Coroutine test_delete_success>
              Test successful entity deletion.
            <Coroutine test_delete_not_found>
              Test delete with non-existent ID returns NotFoundError.
          <Class TestBaseServiceList>
            Test suite for BaseService.list().
            <Coroutine test_list_success>
              Test successful entity listing with pagination.
            <Coroutine test_list_empty_result>
              Test list with no results returns empty list.
          <Class TestBaseServiceUtility>
            Test suite for BaseService utility methods.
            <Coroutine test_exists_true>
              Test exists returns True for existing entity.
            <Coroutine test_exists_false>
              Test exists returns False for non-existent entity.
            <Coroutine test_count_success>
              Test count returns total entity count.
        <Module test_project_service_edge_cases.py>
          Unit tests for ProjectService edge cases.
          
          Tests boundary conditions, error paths, and edge cases.
          <Class TestProjectServiceBoundaryConditions>
            Test suite for project service boundary conditions.
            <Coroutine test_create_project_with_minimum_fields>
              Test creating project with only required fields.
            <Coroutine test_create_project_with_all_fields>
              Test creating project with all optional fields populated.
            <Coroutine test_update_project_partial_single_field>
              Test updating project with only one field changed.
            <Coroutine test_update_project_empty_mission>
              Test updating project mission to empty string.
          <Class TestProjectServiceStatusTransitions>
            Test suite for project status change operations.
            <Coroutine test_change_status_success>
              Test successfully changing project status.
            <Coroutine test_change_status_project_not_found>
              Test changing status of non-existent project.
          <Class TestProjectServiceSprintManagement>
            Test suite for sprint management operations.
            <Coroutine test_add_sprint_to_project>
              Test adding a sprint to project's sprint list.
            <Coroutine test_add_duplicate_sprint_idempotent>
              Test adding a sprint that already exists (should be idempotent).
            <Coroutine test_remove_sprint_from_project>
              Test removing a sprint from project's sprint list.
          <Class TestProjectServiceMetrics>
            Test suite for project metrics calculation.
            <Coroutine test_get_metrics_no_tasks>
              Test metrics calculation for project with no tasks.
            <Coroutine test_get_metrics_project_not_found>
              Test metrics calculation for non-existent project.
          <Class TestProjectServiceSearchAndFiltering>
            Test suite for project search and filtering operations.
            <Coroutine test_get_by_status_no_results>
              Test getting projects by status when none match.
            <Coroutine test_get_by_owner_no_results>
              Test getting projects by owner when none match.
        <Module test_services.py>
          Unit tests for Project, Sprint, and ActionList services.
          
          Consolidated test suite for remaining service layer classes.
          <Class TestProjectService>
            Test suite for ProjectService.
            <Coroutine test_get_metrics_success>
              Test successful metrics calculation.
            <Coroutine test_add_sprint>
              Test adding sprint to project.
            <Coroutine test_remove_sprint>
              Test removing sprint from project.
            <Coroutine test_change_status>
              Test changing project status.
            <Coroutine test_get_by_status>
              Test getting projects by status.
            <Coroutine test_get_by_owner>
              Test getting projects by owner.
          <Class TestSprintService>
            Test suite for SprintService.
            <Coroutine test_calculate_velocity>
              Test velocity calculation from completed tasks.
            <Coroutine test_get_burndown>
              Test burndown chart data calculation.
            <Coroutine test_change_status>
              Test changing sprint status.
            <Coroutine test_get_current_sprints>
              Test getting current sprints.
            <Coroutine test_get_by_project>
              Test getting sprints by project.
            <Coroutine test_update_metrics>
              Test updating sprint metrics.
          <Class TestActionListService>
            Test suite for ActionListService.
            <Coroutine test_reorder_items_success>
              Test successful item reordering.
            <Coroutine test_reorder_items_invalid_length>
              Test reorder with mismatched item count.
            <Coroutine test_mark_complete>
              Test marking action list as complete.
            <Coroutine test_add_item>
              Test adding item to action list.
            <Coroutine test_remove_item>
              Test removing item from action list.
            <Coroutine test_get_orphaned>
              Test getting orphaned action lists.
            <Coroutine test_get_soft_deleted>
              Test getting soft-deleted action lists.
        <Module test_sprint_service_edge_cases.py>
          Unit tests for SprintService edge cases.
          
          Tests velocity calculation, burndown logic, and JSON serialization overrides.
          <Class TestSprintServiceMetrics>
            Test suite for sprint metrics calculations.
            <Coroutine test_calculate_velocity_mixed_tasks>
              Test velocity sums ONLY done tasks.
            <Coroutine test_get_burndown_calculations>
              Test burndown chart math.
          <Class TestSprintServiceSerialization>
            Test JSON mapping overrides.
            <Function test_deserialize_maps_primary_project>
              Test that project_id maps to primary_project during deserialization.
        <Module test_task_service.py>
          Unit tests for TaskService.
          
          Tests task-specific business logic and operations.
          <Class TestTaskServiceStatusTransitions>
            Test suite for task status transitions.
            <Coroutine test_change_status_valid_transition>
              Test valid status transition (NEW → READY).
            <Coroutine test_change_status_invalid_transition>
              Test invalid status transition (DONE → IN_PROGRESS).
            <Coroutine test_change_status_not_found>
              Test change_status with non-existent task.
          <Class TestTaskServiceStatusValidation>
            Test suite for status transition validation logic.
            <Function test_is_valid_transition_new_to_ready>
              Test NEW → READY transition is valid.
            <Function test_is_valid_transition_ready_to_in_progress>
              Test READY → IN_PROGRESS transition is valid.
            <Function test_is_valid_transition_done_to_any_is_invalid>
              Test DONE → any transition is invalid (terminal state).
          <Class TestTaskServiceAssignment>
            Test suite for task assignment operations.
            <Coroutine test_assign_to_sprint>
              Test assigning task to sprint.
            <Coroutine test_assign_to_project>
              Test assigning task to project.
          <Class TestTaskServiceBulkOperations>
            Test suite for bulk operations.
            <Coroutine test_bulk_update_success>
              Test successful bulk update of multiple tasks.
            <Coroutine test_bulk_update_fails_fast>
              Test bulk update fails on first error.
          <Class TestTaskServiceSearch>
            Test suite for task search functionality.
            <Coroutine test_search_by_status>
              Test search by status filter.
            <Coroutine test_search_by_status_and_priority>
              Test search with status and priority filters.
            <Coroutine test_get_high_priority_tasks>
              Test get high priority tasks (P0, P1).
            <Coroutine test_get_blocked_tasks>
              Test get blocked tasks.
        <Module test_task_service_edge_cases.py>
          Unit tests for TaskService edge cases.
          
          Tests status transition validation, boundary conditions, and error paths.
          <Class TestTaskServiceStatusTransitionEdgeCases>
            Test suite for status transition edge cases and validation.
            <Coroutine test_valid_transition_new_to_ready>
              Test valid transition from NEW to READY.
            <Coroutine test_valid_transition_in_progress_to_blocked>
              Test valid transition from IN_PROGRESS to BLOCKED.
            <Coroutine test_valid_transition_in_progress_to_done>
              Test valid transition from IN_PROGRESS to DONE.
            <Coroutine test_invalid_transition_done_to_new>
              Test invalid transition from DONE (terminal state) to NEW.
              
              DONE is a terminal state - no transitions allowed.
            <Coroutine test_invalid_transition_done_to_in_progress>
              Test invalid transition from DONE (terminal state) to IN_PROGRESS.
            <Coroutine test_invalid_transition_dropped_to_ready>
              Test invalid transition from DROPPED (terminal state) to READY.
            <Coroutine test_invalid_transition_new_to_done>
              Test invalid transition from NEW to DONE (skip intermediate states).
            <Coroutine test_invalid_transition_ready_to_blocked>
              Test invalid transition from READY to BLOCKED (must be IN_PROGRESS first).
          <Class TestTaskServiceBulkOperationEdgeCases>
            Test suite for bulk operation edge cases and error handling.
            <Coroutine test_bulk_update_partial_failure_fails_fast>
              Test bulk update fails on first error and doesn't continue.
              
              Ensures fail-fast behavior: if task 2 fails, task 3 should not be processed.
            <Coroutine test_bulk_update_empty_list>
              Test bulk update with empty list returns empty result.
          <Class TestTaskServiceAssignmentEdgeCases>
            Test suite for task assignment edge cases.
            <Coroutine test_assign_to_nonexistent_sprint>
              Test assigning task to non-existent sprint propagates error.
            <Coroutine test_assign_to_nonexistent_project>
              Test assigning task to non-existent project propagates error.
      <Module test_config.py>
        Unit tests for configuration management.
        
        Tests Pydantic Settings v2 validation, nested configuration,
        secret masking, and environment-specific behavior.
        <Class TestDatabaseConfig>
          Test DatabaseConfig validation and connection string generation.
          <Function test_valid_database_config>
            Test valid database configuration.
          <Function test_connection_string_generation>
            Test PostgreSQL connection string generation.
          <Function test_async_connection_string_generation>
            Test PostgreSQL async connection string for SQLAlchemy AsyncIO.
          <Function test_invalid_port_too_low>
            Test that port must be greater than 0.
          <Function test_invalid_port_too_high>
            Test that port must be <= 65535.
          <Function test_empty_user_rejected>
            Test that empty username is rejected.
          <Function test_default_values>
            Test default values for host and port.
        <Class TestRedisConfig>
          Test RedisConfig validation.
          <Function test_valid_redis_config>
            Test valid Redis configuration.
          <Function test_default_values>
            Test Redis default values.
          <Function test_invalid_url_pattern>
            Test that URL must start with redis://.
          <Function test_timeout_validation>
            Test timeout must be between 1 and 60 seconds.
          <Function test_db_number_validation>
            Test database number must be between 0 and 15.
        <Class TestSettings>
          Test Settings validation and environment-specific behavior.
          <Function test_valid_settings_development>
            Test valid settings for development environment.
          <Function test_valid_settings_production>
            Test valid settings for production environment.
          <Function test_production_rejects_insecure_secret_key>
            Test that production environment rejects insecure secret keys.
          <Function test_production_rejects_insecure_jwt_secret>
            Test that production environment rejects insecure JWT secrets.
          <Function test_development_allows_insecure_secrets>
            Test that development environment allows test secrets.
          <Function test_secret_key_min_length_32>
            Test that secret keys must be at least 32 characters.
          <Function test_optional_redis_config>
            Test that Redis configuration is optional.
          <Function test_with_redis_config>
            Test settings with Redis configuration provided.
          <Function test_invalid_environment>
            Test that invalid environment is rejected.
          <Function test_extra_fields_rejected>
            Test that unknown configuration fields are rejected.
          <Function test_environment_helpers>
            Test environment helper properties.
        <Class TestGetSettings>
          Test get_settings caching behavior.
          <Function test_settings_cached>
            Test that settings are cached across calls.
          <Function test_cache_clear>
            Test that cache_clear forces reload.
      <Module test_fixtures.py>
        Test that conftest.py fixtures work correctly.
        
        This validates the shared test infrastructure.
        <Class TestDatabaseConfigFixture>
          Test test_database_config fixture.
          <Function test_fixture_provides_isolated_config>
            Test that database config fixture provides isolated configuration.
          <Function test_fixture_connection_string>
            Test that fixture generates valid connection strings.
        <Class TestRedisConfigFixture>
          Test test_redis_config fixture.
          <Function test_fixture_provides_isolated_config>
            Test that Redis config fixture provides isolated configuration.
        <Class TestSettingsFixture>
          Test test_settings fixture.
          <Function test_fixture_provides_complete_settings>
            Test that settings fixture provides complete configuration.
          <Function test_fixture_includes_database>
            Test that settings fixture includes database configuration.
          <Function test_fixture_includes_redis>
            Test that settings fixture includes Redis configuration.
        <Class TestMinimalSettingsFixture>
          Test minimal_test_settings fixture.
          <Function test_fixture_provides_minimal_config>
            Test that minimal fixture omits optional components.
        <Class TestProductionLikeFixture>
          Test production_like_settings fixture.
          <Function test_fixture_simulates_production>
            Test that production fixture simulates production environment.
          <Function test_fixture_has_production_database>
            Test that production fixture has production-like database config.
          <Function test_fixture_has_production_redis>
            Test that production fixture has production-like Redis config.
        <Class TestCacheClearFixture>
          Test that cache clearing fixture works correctly.
          <Function test_cache_cleared_between_tests_1>
            First test - cache should be cleared before this.
          <Function test_cache_cleared_between_tests_2>
            Second test - cache should be cleared before this.
        <Class TestEnvironmentIsolation>
          Test that test environment is properly isolated.
          <Function test_environment_set_to_testing>
            Test that environment is forced to 'testing' for all tests.
          <Function test_settings_default_to_testing>
            Test that settings fixtures default to testing environment.


---------- coverage: platform win32, python 3.11.9-final-0 -----------
Name                                                     Stmts   Miss Branch BrPart   Cover   Missing
-----------------------------------------------------------------------------------------------------
src\taskman_api\auth.py                                     61     39      8      0  31.88%   41-44, 48, 52, 56, 85-99, 115-120, 156-179, 200-212, 232-246
src\taskman_api\config.py                                   62     16      6      0  67.65%   102-103, 114-115, 224-243, 249, 255, 261, 290
src\taskman_api\core\errors.py                              78     60     36      0  15.79%   31-37, 48-57, 72-78, 101-109, 134-146, 169-177, 199-205, 226-230, 253-259
src\taskman_api\core\result.py                              37     14      0      0  62.16%   34, 37, 40, 43, 47, 50, 54, 63, 66, 69, 72, 76, 79, 83
src\taskman_api\db\base.py                                   6      1      0      0  83.33%   32
src\taskman_api\db\connection_manager.py                    91     68     10      1  23.76%   66-68, 75-124, 135-165, 170-183
src\taskman_api\db\session.py                               27      8      4      0  61.29%   48-50, 63-64, 73-75, 85
src\taskman_api\dependencies.py                             45     12      0      0  73.33%   34-38, 48, 53, 58, 63, 69, 74, 79, 84
src\taskman_api\main.py                                    104     49     18      0  45.08%   55-78, 107-161, 234-249, 273, 296, 307, 320-322
src\taskman_api\middleware\logging_middleware.py            85     63     32      0  18.80%   75-78, 90-104, 119-133, 168, 176-177, 192-272
src\taskman_api\models\action_list.py                       54     12      6      0  70.00%   33-36, 40-42, 46-48, 128, 133
src\taskman_api\models\project.py                           45      1      0      0  97.78%   91
src\taskman_api\models\sprint.py                            51      3      0      0  94.12%   44, 48, 101
src\taskman_api\repositories\action_list_repository.py      43     28     10      0  28.30%   23, 27-32, 36-39, 54-77, 88-95, 99-101, 105-107, 111-112
src\taskman_api\repositories\base.py                        33     17      0      0  48.48%   30, 34-37, 41-44, 48-51, 55-57, 61-62, 66-71
src\taskman_api\repositories\project_repository.py          46     33     12      0  22.41%   20, 24-27, 31-34, 38-41, 55-71, 82-94, 105-117
src\taskman_api\repositories\sprint_repository.py           51     37     14      0  21.54%   20, 24-27, 31-34, 38-41, 45-48, 62-78, 91-105, 117-131
src\taskman_api\repositories\task_repository.py             81     64     42      0  13.82%   22, 26-29, 33-34, 38-41, 45-48, 52-55, 73-98, 142-180, 201-233, 237-240
src\taskman_api\routers\action_lists.py                     84     60     20      0  23.08%   80-102, 167-188, 256-273, 344-361, 392-401, 442-453, 501-517, 562-578
src\taskman_api\routers\agent.py                            30     15      6      0  41.67%   32-72
src\taskman_api\routers\diagnostic.py                       20     14      0      0  30.00%   16-40
src\taskman_api\routers\projects.py                         73     53     32      0  19.05%   36-64, 72-86, 94-103, 113-126, 134-143
src\taskman_api\routers\sprints.py                         108     82     52      0  16.25%   42-70, 78-94, 102-111, 119-128, 138-151, 159-168, 176-185, 193-202
src\taskman_api\routers\tasks.py                            94     71     42      0  16.91%   41-83, 91-105, 113-122, 131-144, 152-161, 170-183
src\taskman_api\schemas\action_list.py                      82      3      2      0  94.05%   242-244
src\taskman_api\schemas\base.py                             53      7      6      0  77.97%   21-28
src\taskman_api\schemas\project.py                         163     46     26      0  61.90%   164-166, 182-194, 210-222, 228-240, 246-252
src\taskman_api\schemas\sprint.py                          154     42     22      0  63.64%   147-149, 154-156, 164-176, 182-194, 200-212
src\taskman_api\schemas\task.py                            193     49     28      0  65.16%   217-219, 225-227, 235-247, 255-267, 273-285, 291-297
src\taskman_api\services\action_list_service.py            112     94     32      0  12.50%   28-29, 38-40, 51-65, 71-92, 96-118, 124-143, 149-157, 161-183, 189-211
src\taskman_api\services\base.py                           110     89     24      0  15.67%   53-55, 63-78, 86-106, 120-140, 154-172, 191-224, 238-253, 269-280, 294-298, 306-310
src\taskman_api\services\project_service.py                 97     79     36      0  13.53%   44-48, 68-85, 115-175, 198-212, 232-246, 265-266, 290-300, 321-331
src\taskman_api\services\sprint_service.py                 141    115     48      0  13.76%   54-59, 79-96, 113-157, 169-173, 177-179, 183-186, 209-229, 262-325, 344-345, 369-380, 401-410, 431-440, 462-470
src\taskman_api\services\task_service.py                    91     69     28      0  18.49%   46-50, 64-85, 102-125, 159-178, 203-222, 248-249, 273-274, 303-322, 352-387, 409-417, 440-451
-----------------------------------------------------------------------------------------------------
TOTAL                                                     2834   1413    602      1  41.39%

12 files skipped due to complete coverage.
Coverage HTML written to dir htmlcov
Coverage JSON written to file coverage.json

FAIL Required test coverage of 70.0% not reached. Total coverage: 41.39%
============================================ 212 tests collected in 3.57s =============================================
