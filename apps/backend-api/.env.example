# TaskMan-v2 Backend API Configuration
# This file contains example environment variables for development.
# Copy this file to .env and update with your actual values.
#
# IMPORTANT: Never commit .env files to version control!
#
# Variable Naming Convention:
# - All variables must be prefixed with APP_
# - Nested configuration uses double underscore (__) as delimiter
# - Example: APP_DATABASE__HOST=localhost
#
# For more information, see: src/taskman_api/config.py

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Application name (displayed in logs and API responses)
APP_APP_NAME=TaskMan API

# Deployment environment
# Allowed values: development, testing, staging, production
# - development: Debug mode enabled, relaxed validation
# - testing: Isolated test database, fixtures enabled
# - staging: Production-like environment for final testing
# - production: Strict validation, secrets required, debug disabled
APP_ENVIRONMENT=development

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================

# Database host (use 'postgres' when running in Docker Compose)
APP_DATABASE__HOST=localhost

# Database port (default: 5432)
APP_DATABASE__PORT=5432

# Database username
APP_DATABASE__USER=taskman

# Database password (SecretStr - never logged)
# IMPORTANT: Change this in production!
APP_DATABASE__PASSWORD=taskman_dev_password

# Database name
APP_DATABASE__DATABASE=taskman_dev

# Enable SQL query logging (disable in production for performance)
# Set to true to log all SQL queries to console (useful for debugging)
APP_DATABASE__ECHO_SQL=false

# Database connection pool size (number of persistent connections)
# Recommended: 10-20 for development, 20-50 for production
# Range: 1-100
APP_DATABASE__POOL_SIZE=10

# Maximum overflow connections beyond pool_size
# These are temporary connections created when pool is exhausted
# Recommended: 5-10 for development, 10-20 for production
# Range: 0-50
APP_DATABASE__MAX_OVERFLOW=5

# ============================================================================
# REDIS CONFIGURATION (Optional - for caching and sessions)
# ============================================================================

# Redis connection URL (must start with redis://)
# Use 'redis' hostname when running in Docker Compose
# APP_REDIS__URL=redis://localhost:6379

# Redis connection timeout in seconds (1-60, default: 5)
# APP_REDIS__TIMEOUT=5

# Redis database number (0-15, default: 0)
# APP_REDIS__DB=0

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================

# Application secret key (minimum 32 characters)
# Used for session encryption and CSRF protection
# IMPORTANT: Generate a unique key for each environment!
#
# To generate a secure key, run:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#
APP_SECRET_KEY=CHANGE_ME_dev_secret_key_min_32_characters

# JWT signing secret (minimum 32 characters)
# Used for signing JWT tokens for authentication
# IMPORTANT: Must be different from SECRET_KEY in production!
#
# To generate a secure key, run:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#
APP_JWT_SECRET=CHANGE_ME_dev_jwt_secret_min_32_characters

# ============================================================================
# DEVELOPMENT NOTES
# ============================================================================

# Quick Start:
# 1. Copy this file:
#      cp .env.example .env
#
# 2. Generate secure keys:
#      python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 3. Update APP_SECRET_KEY and APP_JWT_SECRET with generated keys
#
# 4. Update database credentials if needed
#
# 5. Start the API:
#      uvicorn taskman_api.main:app --reload
#
# 6. Verify configuration:
#      python -c "from taskman_api.config import get_settings; print(get_settings())"

# Docker Compose Integration:
# When running with docker-compose.yml, override these values:
# - APP_DATABASE__HOST=postgres (use container name)
# - APP_REDIS__URL=redis://redis:6379 (if using Redis)

# Production Checklist:
# ✅ APP_ENVIRONMENT=production
# ✅ Generate unique APP_SECRET_KEY (32+ chars)
# ✅ Generate unique APP_JWT_SECRET (32+ chars)
# ✅ Use strong database password (20+ chars, mixed case, numbers, symbols)
# ✅ Enable Redis for production caching (recommended)
# ✅ Use AWS Secrets Manager for production secrets (see config.py)
# ✅ Never use "CHANGE_ME" or "test" in production keys

# ============================================================================
# OPENTELEMETRY CONFIGURATION
# ============================================================================

# OTLP exporter endpoint (e.g., http://localhost:4318 for Jaeger)
# Set to empty string to disable telemetry (graceful degradation)
APP_OTEL__EXPORTER_ENDPOINT=

# Service name for telemetry (identifies this service in traces)
APP_OTEL__SERVICE_NAME=taskman-api

# Sampling rate (0.0 to 1.0, where 1.0 = 100% of requests)
# Production recommendation: 0.1 (10%)
APP_OTEL__SAMPLE_RATE=1.0

# Circuit breaker failure threshold (consecutive failures before opening)
APP_OTEL__CIRCUIT_BREAKER_THRESHOLD=3
